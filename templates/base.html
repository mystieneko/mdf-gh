<!DOCTYPE html>
<html lang="en" class="{{config.THEME}}">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="shortcut icon" href="{{ config.ICON_URL }}">
	<link rel="stylesheet" href="{{ url_for('static', filename= 'css/base.css') }}">
	{% set theme = "css/themes/" + config.THEME + ".css" %}
	<link rel="stylesheet" href="{{ url_for('static', filename=theme) }}">
	<title>{% block title %} {% endblock %}</title>
</head>
<body>
	<br>
	<nav class="navbar navbar-expand-lg bg-body-tertiary">
		{% if session['user'] %}
		<div class="logged-in">
			<p>Logged in as <b>{{ session['user'] }}</b> · <a href="/logout">Logout</a></p>
		</div>
		{% endif %}
		<div class="main-content" style="cursor: default;">
			<a class="navbar-brand nav-link" href="{{ url_for('index')}}">
				<img src="{{ config.ICON_URL }}" width="24">
				<span class="desktop">{{ config.SITE_NAME }}</span>
			</a>
			<div class="collapse navbar-collapse" id="navbarNav">
				<a class="nav-link" href="{{url_for('index')}}">Home</a>
				<a class="nav-link" href="{{url_for('posts')}}">Posts</a>
				<span>·</span>
				{% if session['user'] %}
				<a class="nav-link btn btn-primary" role="button" href="{{url_for('create')}}">New Post</a>
				{% else %}
				<a class="nav-link" href="{{ url_for('login') }}">Login</a>
				{% if config.REGISTRATIONS_OPENED == 1 %}
				<a class="nav-link" href="{{ url_for('register') }}">Register</a>
				{% endif %}
				{% endif %}
			</div>
		</div>
	</nav>
	<br>
	<div class="container">
		{% for message in get_flashed_messages() %}
		<div class="alert alert-danger alert-dismissible fade show mt-2" role="alert">
			<input type="checkbox" id="alert-close" class="alert-close">
			<div class="alert-content">{{ message }}</div>
		</div>
		{% endfor %}
		{% block content %} {% endblock %}
	</div>
	<footer class="text-center" style="margin-bottom: 30px;">
		<div class="container">
			<div class="links" style="cursor: default;">
				<a href="{{url_for('roadmap')}}">Roadmap</a>
				<a href="{{url_for('about')}}">About</a>
				<a href="https://codeberg.org/mystie/flaskblog" target="_blank">Source code</a>
			</div>
			<p class="small"><br>Made with ❤ by <a href="https://matrix.to/#/@mystie:tchncs.de" class="text-reset text-decoration-none">mystieneko</a>. No rights reserved.</p>
		</div>
	</footer>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const alertClose = document.querySelector('.alert-close');
			const alert = document.querySelector('.alert');

			alertClose.addEventListener('change', function() {
				if (alertClose.checked) {
					alert.classList.add('hide');
				} else {
					alert.classList.remove('hide');
				}
			});
		});

	</script>
</body>
</html>